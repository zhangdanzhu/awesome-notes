{"version":3,"sources":["main.min.js"],"names":["$","document","ready","tableJSON","win","doc","undef","_setPage","page","_page","this","_getJSON","ajax","url","type","dataType","success","data","tableData","concat","_gottenPageNum","console","error","_maxPageNum","DataTable","columns","paging","retrieve","destroy","remove","css","window","print","body","ML","bodyContent","location","reload","log","innerHTML","reqJSON","buttonHandle","i","click"],"mappings":"AAAAA,EAAEC,UAAUC,MAAM,WACd,GAAIC,GAAa,SAAUC,EAAKC,EAAKC,GAQ7B,QAASC,GAASC,GAEd,MADAC,GAAQD,EACDE,KAQX,QAASC,KA8CL,MA7CAX,GAAEY,MACEC,IAAKA,EAAMJ,EACXK,KAAM,MACNC,SAAU,OACVC,QAAS,SAAUC,GACZA,GAECC,EAAYA,EAAUC,OAAOF,GAC7BG,KAEAC,QAAQC,MAAM,UAGdF,IAAmBG,IAEnBvB,EAAE,SAASwB,WACPP,KAAMC,EACFO,UACMR,KAAM,SACNA,KAAM,aACNA,KAAM,WACNA,KAAM,WAEZS,QAAQ,EACRC,UAAS,EACTC,SAAQ,IAIhB5B,EAAE,SAAS6B,SACX7B,EAAE,gBAAgB6B,SAClB7B,EAAE,SAAS8B,IAAI,UAAW,SAC1BC,OAAOC,QAEPZ,EAAiB,EAEjBnB,SAASgC,KAAKC,GAAKC,EACnBlC,SAASmC,SAASC,WAG1Bf,MAAO,WACHD,QAAQiB,IAAI,aAIb5B,KA/DX,GAAID,GAAQ,EACRW,EAAiB,EACjBG,EAAc,EACdV,EAAM,yBACNK,KACAiB,EAAclC,SAASgC,KAAKM,SA6DhC,QACIC,QAAS,SAAUhC,GAIf,MAHAD,GAASC,GACTG,IAEOD,QAGjBqB,OAAQ9B,UACVwC,EAAe,WACX,IAAKC,EAAI,EAAEA,GAAK,EAAEA,IACdvC,EAAUqC,QAAQE,GAI9B1C,GAAE,UAAU2C,MAAMF","file":"main.min.js","sourcesContent":["$(document).ready(function() {\n    var tableJSON = (function (win, doc, undef) {\n            var _page = 1,              // 设置请求第几页表单\n                _gottenPageNum = 0,     // 计算当前已经得到了多少页表单\n                _maxPageNum = 5,        // 保存表单页数\n                url = 'http://localhost:3000/',\n                tableData = [],         // 保存表单数据\n                bodyContent = document.body.innerHTML;\n\n            function _setPage(page) {\n                _page = page;\n                return this;\n            }\n\n            function _setMaxPageNum(pages) {\n                _maxPageNum = pages;\n                return this;\n            }\n\n            function _getJSON() {\n                $.ajax({\n                    url: url + _page,\n                    type: 'get',\n                    dataType: 'json',\n                    success: function (data) {\n                        if(data) {\n                            // 将请求得到的某一页表单保存至数组中\n                            tableData = tableData.concat(data);\n                            _gottenPageNum++;\n                        } else {\n                            console.error('获取数据失败');\n                        }\n\n                        if (_gottenPageNum === _maxPageNum) {\n                            // 当表单分页全部请求完毕,开始渲染单页表单\n                            $('#demo').DataTable({\n                                data: tableData,\n                                    columns: [\n                                        { data: 'name'},\n                                        { data: 'position'},\n                                        { data: 'salary'},\n                                        { data: 'office'}\n                                    ],\n                                    paging: false,\n                                    retrieve:true,\n                                    destroy:true\n                            });\n\n                            // 打印单页表单\n                            $('input').remove();\n                            $('#demo_filter').remove();\n                            $('#demo').css('display', 'block');\n                            window.print();\n                            // 将计数器重新置0\n                            _gottenPageNum = 0;\n                            // 还原网站页面\n                            document.body.ML = bodyContent;\n                            document.location.reload();\n                        }\n                    },\n                    error: function () {\n                        console.log('获取数据失败');\n                    }\n                });\n\n                return this;\n            }\n\n            return {\n                reqJSON: function (page) {\n                    _setPage(page);\n                    _getJSON();\n\n                    return this;\n                }\n            };\n        }(window, document)),\n        buttonHandle = function () {\n            for (i = 1;i <= 5;i++) {\n                tableJSON.reqJSON(i);\n            }\n        };\n\n    $('.print').click(buttonHandle);\n});\n\n\n    // $.ajax({\n    //     url: 'http://localhost:3000/2/',\n    //     type: 'get',\n    //     dataType: 'json',\n    //     success: function (data) {\n    //         $('#demo').DataTable({\n    //             // data: data,\n    //             // columns: [\n    //             //     { data: 'name'},\n    //             //     { data: 'position'},\n    //             //     { data: 'salary'},\n    //             //     { data: 'office'}\n    //             // ],\n    //             dom: 'Bfrtip',\n    //             buttons: [\n    //                 'print', 'excel', 'pdf'\n    //             ],\n    //             \"sPaginationType\" : \"full_numbers\",\n    //             \"oLanguage\" : {\n    //                 \"sLengthMenu\": \"每页显示 _MENU_ 条记录\",\n    //                 \"sInfo\": \"从 _START_ 到 _END_ /共 _TOTAL_ 条数据\",\n    //                 \"sInfoEmpty\": \"没有数据\",\n    //                 \"sInfoFiltered\": \"(从 _MAX_ 条数据中检索)\",\n    //                 \"sZeroRecords\": \"没有检索到数据\",\n    //                 \"sSearch\": \"名称:\",\n    //                 \"oPaginate\": {\n    //                     \"sFirst\": \"首页\",\n    //                     \"sPrevious\": \"前一页\",\n    //                     \"sNext\": \"后一页\",\n    //                     \"sLast\": \"尾页\"\n    //                 }\n    //             },\n    //             retrieve:true,\n    //             destroy:true\n    //         });\n    //     },\n    //     error: function () {\n    //         console.log('error');\n    //     }\n    // });\n"],"sourceRoot":"/source/"}